(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2037:function(e,t,n){Promise.resolve().then(n.bind(n,103))},103:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(7437),o=n(2265),l=n(4829);let r="https://mainnet-public.mirrornode.hedera.com";function c(e){return(e=e.trim().toLowerCase()).includes(".")?e:/^\d+$/.test(e)?"0.0.".concat(e):e}async function s(e){try{let t=c(e),n="https://mainnet-public.mirrornode.hedera.com/api/v1/tokens/".concat(t);console.log("Fetching token info from:",n);let a=await l.Z.get(n);if(!a.data)throw Error("Failed to fetch token info: ".concat(a.status," ").concat(a.statusText));return console.log("Token info response:",a.data),{name:a.data.name,symbol:a.data.symbol,total_supply:a.data.total_supply,decimals:Number(a.data.decimals)}}catch(e){var t,n,a,o,r,s,i;throw console.error("Error fetching token info:",{status:null===(t=e.response)||void 0===t?void 0:t.status,statusText:null===(n=e.response)||void 0===n?void 0:n.statusText,data:null===(a=e.response)||void 0===a?void 0:a.data,url:null===(o=e.config)||void 0===o?void 0:o.url}),Error((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||(null===(i=e.response)||void 0===i?void 0:i.statusText)||"Error fetching token data")}}async function i(e){var t,n,a,o,i,d,u;let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let o=c(e),i=await s(o);console.log("Token Info:",{name:i.name,symbol:i.symbol,decimals:i.decimals,total_supply:i.total_supply});let d=new Map,u=!0,g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?"".concat(r).concat(e):"".concat(r).concat("/api/v1","/tokens/").concat(o,"/balances?limit=100");return console.log("Fetching balances from:",t),l.Z.get(t)},m=await g(),p=m.data.balances.filter(e=>"0"!==e.balance&&BigInt(e.balance)>0);p.forEach(e=>d.set(e.account,e)),u=!!(null===(t=m.data.links)||void 0===t?void 0:t.next);let f=null===(n=m.data.links)||void 0===n?void 0:n.next,x=1;for(;u&&x<200&&f;)try{console.log("Fetching page ".concat(x+1," using next link"));let e=await g(f);(p=e.data.balances.filter(e=>"0"!==e.balance&&BigInt(e.balance)>0)).length>0?(p.forEach(e=>d.set(e.account,e)),console.log("Found ".concat(p.length," holders on page ").concat(x+1," (total unique: ").concat(d.size,")"))):u=!1,f=null===(a=e.data.links)||void 0===a?void 0:a.next,u=u&&!!f,x++,await new Promise(e=>setTimeout(e,100))}catch(e){console.error("Error fetching page ".concat(x+1,":"),e),u=!1}let b=Array.from(d.values());console.log("Total unique holders fetched: ".concat(b.length," from ").concat(x," pages"));let v=Number(i.decimals),y=BigInt(10**v),j=BigInt(i.total_supply);console.log("Sorting holders...");let k=b.map(e=>({...e,numericBalance:BigInt(e.balance)})).sort((e,t)=>e.numericBalance>t.numericBalance?-1:e.numericBalance<t.numericBalance?1:0).slice(0,h).map(e=>{let t=Number(e.numericBalance*BigInt(1e6)/j)/1e4;return{account:e.account,balance:e.balance,percentage:t}});console.log("Top holders:",k.slice(0,20).map(e=>({account:e.account,balance:function(e,t){try{let n=BigInt(e),a=BigInt(10**t),o=n%a,l=(n/a).toString();if(o>0){let e=o.toString().padStart(t,"0");for(;e.endsWith("0");)e=e.slice(0,-1);e.length>0&&(l+="."+e)}let r=l.split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),r.join(".")}catch(t){return console.error("Error formatting balance:",t),e}}(e.balance,v),percentage:e.percentage.toFixed(4)+"%"})));let N={totalAccounts:b.length+(u?"+":""),accountsAboveOne:b.filter(e=>BigInt(e.balance)>=y).length};return{holders:k,stats:N}}catch(e){throw console.error("Error fetching token holders:",{status:null===(o=e.response)||void 0===o?void 0:o.status,statusText:null===(i=e.response)||void 0===i?void 0:i.statusText,data:null===(d=e.response)||void 0===d?void 0:d.data,url:null===(u=e.config)||void 0===u?void 0:u.url}),e}}function d(){let[e,t]=(0,o.useState)(""),[n,l]=(0,o.useState)({holders:[],info:null,error:null,loading:!1}),r=(e,t)=>{let n=BigInt(e),a=BigInt(10**t),o=(n%a).toString().padStart(t,"0");o=o.replace(/0+$/,"");let l=(n/a).toLocaleString();return o?"".concat(l,".").concat(o):l},c=async()=>{if(!e){l(e=>({...e,error:"Please enter a token ID"}));return}l(e=>({...e,loading:!0,error:null}));try{let t=await s(e);console.log("Received token info:",t),l(e=>({...e,info:{name:t.name,symbol:t.symbol,total_supply:t.total_supply,decimals:Number(t.decimals)}}));let n=await i(e);l(e=>({...e,holders:n.holders,loading:!1}))}catch(e){console.error("Error fetching token data:",e),l(e=>({...e,error:"Error fetching token data. Please check the token ID and try again.",loading:!1}))}};return(0,a.jsx)("main",{className:"min-h-screen p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Hedera Token Tracker"}),(0,a.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter token ID (e.g., 0.0.1234)",className:"flex-1 p-2 border rounded"}),(0,a.jsx)("button",{onClick:c,disabled:n.loading,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-blue-300",children:n.loading?"Loading...":"Search"})]}),n.error&&(0,a.jsx)("div",{className:"text-red-500 mb-4",children:n.error}),n.info&&(0,a.jsxs)("div",{className:"mb-8 p-4 bg-gray-100 rounded",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Token Information"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Name:"})," ",n.info.name]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Symbol:"})," ",n.info.symbol]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Total Supply:"})," ",r(n.info.total_supply,n.info.decimals)]})]}),n.holders.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Top Token Holders"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"p-2 text-left",children:"Account"}),(0,a.jsx)("th",{className:"p-2 text-right",children:"Balance"}),(0,a.jsx)("th",{className:"p-2 text-right",children:"Percentage"})]})}),(0,a.jsx)("tbody",{children:n.holders.map((e,t)=>(0,a.jsxs)("tr",{className:t%2==0?"bg-gray-50":"",children:[(0,a.jsx)("td",{className:"p-2",children:e.account}),(0,a.jsx)("td",{className:"p-2 text-right font-mono",children:n.info?r(e.balance,n.info.decimals):e.balance}),(0,a.jsxs)("td",{className:"p-2 text-right",children:[e.percentage.toFixed(4),"%"]})]},e.account))})]})})]})]})})}}},function(e){e.O(0,[737,971,938,744],function(){return e(e.s=2037)}),_N_E=e.O()}]);